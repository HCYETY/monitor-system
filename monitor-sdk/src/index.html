<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>monitor-sdk</title>
</head>

<body>
    <div class='whole'>
        <div class="left">
            <strong>异常数据</strong>

            <h2>前端异常</h2>
            <button class='hello' onclick="bugJs()">JS 代码执行异常</button>
            <button class='world' onclick="bugPromise()">Promise 异常</button>
            <button class='hi' onclick="bugAsset()">静态资源加载异常</button>
            <button class='foursheep' onclick="bugConsole()">console.error 异常</button>
            <button class='good' onclick="bugCors()">跨域异常</button>
            <img src="http://localhost:8888/nottrue.jpg" />

            <br />

            <h2>接口异常</h2>
            <button onclick="bugNoRespond()">未响应/超时响应异常</button>
            <button type="warning" onclick="bugInterface4()">4xx 请求异常</button>
            <button onclick="bugInterface5()">5xx 服务器异常</button>
            <button onclick="bugPowerless()">权限不足</button>

            <h1>白屏异常</h1>
            <button type="info" onclick="bugWhiteScreen()">白屏异常</button>
        </div>

        <div class="right">
            <strong>行为数据</strong><br>
            <button type="success" onclick="getPerform()">获取性能数据</button>
            <button type="success" onclick="getClickInform()">点击事件</button>
            <button type="warning">
                <RouterLink to="/">路由跳转</RouterLink>
            </button>
            <button onclick="getPv()">PV、UV</button>
            <button type="info" onclick="bugHttp()">HTTP 请求监控</button>
            <button type="success" onclick="getUserAgentInform()">用户设备类型，浏览器版本，webview引擎类型</button>
        </div>

        <br>
        <hr>
        <br>

        <!--    <div>-->
        <!--      <strong><h1>性能监控</h1></strong>-->
        <!--      <button onclick="">白屏时间</button>-->
        <!--      <button onclick="">页面资源加载耗时</button>-->
        <!--      <button onclick="">首屏渲染耗时</button>-->
        <!--      <button onclick="">接口请求耗时</button>-->
        <!--      <button onclick="">收集长时间运行任务（longtasks）</button>-->
        <!--    </div>-->
    </div>
    <script>
        // ========================制造bug=============================
        // import { getUserAgent } from "@/common";
        console.log(1);

        // const getPerform = function () {
        //     getPerformanceTiming();
        // }
        const bugJs = () => {
            window.someVar.error = 'error'
        }
        const bugPromise = () => {
            new Promise(function (resolve, reject) {
                window.someVar.error = 'error';
            })
        }
        const bugAsset = function () {

        }
        const bugConsole = function () {
            console.error(new Error('错误捕获222'));
        }
        const bugCors = function () {
            // try {
            //     request({
            //         url: "/test",
            //         method: "post",
            //         data: '你好foursheep',
            //     });
            // } catch (e) {
            //     console.error(e);
            //     // if (ErrorEvent) {
            //     //   window.dispatchEvent(new ErrorEvent('error', { e, message: e.message })) // 这里也会触发window.onerror
            //     // } else {
            //     //   window.onerror && window.onerror(null, null, null, null, e)
            //     // }
            //
            //     // window.addEventListener('error', (e) => {
            //     //   console.log('捕获到跨域报错', e);
            //     // })
            // }
        }
        const bugNoRespond = function () {

        }
        const bugInterface4 = function () {
            fetch('/test', {
                method: 'post',
                body: '你好foursheep',
            })
            // request({
            //     url: "/test",
            //     method: "post",
            //     data: '你好foursheep',
            // });
        }
        const bugInterface5 = function () {

        }
        const bugPowerless = function () {

        }
        const bugWhiteScreen = function () {

        }
        const bugHttp = function () {

        }

    </script>
</body>

</html>